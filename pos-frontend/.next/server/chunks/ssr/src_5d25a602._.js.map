{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Code/POS_Project/pos-frontend/src/components/printing/PrintReceipt.tsx"],"sourcesContent":["// pos-frontend/src/components/printing/PrintReceipt.tsx\r\nimport React from \"react\";\r\n\r\ntype ReceiptItem = {\r\n  desc: string;\r\n  qty: number;\r\n  price?: number;\r\n  amount: number;\r\n};\r\n\r\ntype PrintReceiptProps = {\r\n  store?: {\r\n    name?: string;\r\n    address1?: string;\r\n    address2?: string;\r\n  };\r\n  customer?: { name?: string | null };\r\n  date?: string;\r\n  items: ReceiptItem[];\r\n  cartTotal: number;\r\n  amount: number;\r\n  change: number;\r\n  points?: number;\r\n};\r\n\r\nexport default function PrintReceipt({\r\n  store,\r\n  customer,\r\n  date,\r\n  items,\r\n  cartTotal,\r\n  amount,\r\n  change,\r\n  points,\r\n}: PrintReceiptProps) {\r\n  const safeDate =\r\n    date ||\r\n    new Date().toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"2-digit\",\r\n    });\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", justifyContent: \"center\", background: \"#f5f5f5\" }}>\r\n      <div\r\n        id=\"receipt-root\"\r\n        style={{\r\n          width: \"80mm\",\r\n          background: \"#fff\",\r\n          color: \"#000\",\r\n          padding: \"10px\",\r\n          boxSizing: \"border-box\",\r\n          fontFamily: \"'Courier New', monospace\",\r\n          fontSize: \"12px\",\r\n          lineHeight: 1.2,\r\n        }}\r\n      >\r\n        <style\r\n          dangerouslySetInnerHTML={{\r\n            __html: `\r\n@page {\r\n  size: 80mm auto;\r\n  margin: 0;\r\n}\r\n* {\r\n  -webkit-print-color-adjust: exact;\r\n  print-color-adjust: exact;\r\n}\r\n.no-print {\r\n  display: inline-flex;\r\n}\r\n@media print {\r\n  html, body {\r\n    margin: 0 !important;\r\n    padding: 0 !important;\r\n    width: 80mm !important;\r\n  }\r\n  .no-print {\r\n    display: none !important;\r\n  }\r\n}\r\n.separator {\r\n  border-top: 1px dashed #000;\r\n  margin: 6px 0;\r\n  height: 1px;\r\n}\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n.table th, .table td {\r\n  padding: 2px 0;\r\n  text-align: left;\r\n  font-size: 11px;\r\n  white-space: nowrap;\r\n}\r\n.right { text-align: right; }\r\n.center { text-align: center; }\r\n.header { text-align: center; font-weight: bold; margin-bottom: 6px; font-size: 14px; }\r\n.footer { margin-top: 12px; text-align: center; font-weight: bold; }\r\n.summary { margin: 8px 0; }\r\n.summary-line { display: flex; justify-content: space-between; margin: 2px 0; }\r\n.actions {\r\n  position: sticky;\r\n  bottom: 0;\r\n  margin-top: 10px;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n.actions button {\r\n  flex: 1;\r\n  height: 36px;\r\n  font-size: 14px;\r\n}\r\n`,\r\n          }}\r\n        />\r\n        <div className=\"header\">\r\n          <div>{store?.name ?? \"YZY STORE\"}</div>\r\n          <div>{store?.address1 ?? \"Eastern Slide, Tuding\"}</div>\r\n          {store?.address2 ? <div>{store.address2}</div> : null}\r\n        </div>\r\n\r\n        <div className=\"separator\" />\r\n\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <span>Customer:</span>\r\n          <span>{customer?.name || \"N/A\"}</span>\r\n        </div>\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <span>Date:</span>\r\n          <span>{safeDate}</span>\r\n        </div>\r\n\r\n        <div className=\"separator\" />\r\n\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Description</th>\r\n              <th className=\"right\">Qty</th>\r\n              <th className=\"right\">Price</th>\r\n              <th className=\"right\">Amount</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map((it, i) => {\r\n              const price =\r\n                typeof it.price === \"number\" ? it.price : it.amount / Math.max(1, it.qty);\r\n              const desc = it.desc.length > 20 ? `${it.desc.slice(0, 17)}...` : it.desc;\r\n              return (\r\n                <tr key={i}>\r\n                  <td>{i + 1}</td>\r\n                  <td>{desc}</td>\r\n                  <td className=\"right\">{it.qty}</td>\r\n                  <td className=\"right\">P{price.toFixed(2)}</td>\r\n                  <td className=\"right\">P{it.amount.toFixed(2)}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div className=\"separator\" />\r\n\r\n        <div className=\"summary\">\r\n          <div className=\"summary-line\">\r\n            <span>Total:</span>\r\n            <span>P{cartTotal.toFixed(2)}</span>\r\n          </div>\r\n          <div className=\"summary-line\">\r\n            <span>Amount:</span>\r\n            <span>P{amount.toFixed(2)}</span>\r\n          </div>\r\n          <div className=\"summary-line\">\r\n            <span>Change:</span>\r\n            <span>P{change.toFixed(2)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"separator\" />\r\n\r\n        <div className=\"summary-line\">\r\n          <span>Customer Points:</span>\r\n          <span>{points ?? 0}</span>\r\n        </div>\r\n\r\n        <div className=\"separator\" />\r\n\r\n        <div className=\"footer\">\r\n          <div>CUSTOMER COPY - NOT AN OFFICIAL RECEIPT</div>\r\n          <div>THANK YOU - GATANG KA MANEN!</div>\r\n        </div>\r\n\r\n        <div className=\"separator\" />\r\n\r\n        <div className=\"actions no-print\">\r\n          <button onClick={() => window.print()}>Print</button>\r\n          <button onClick={() => window.close()}>Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///C:/Code/POS_Project/pos-frontend/src/app/print/receipt/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport PrintReceipt from \"@/components/printing/PrintReceipt\";\r\n\r\ntype ReceiptItem = { desc: string; qty: number; price?: number; amount: number };\r\ntype Data = {\r\n  store?: { name?: string; address1?: string; address2?: string };\r\n  customer?: { name?: string | null };\r\n  cartTotal: number;\r\n  amount: number;\r\n  change: number;\r\n  points?: number;\r\n  items: ReceiptItem[];\r\n};\r\n\r\nexport default function ReceiptPage() {\r\n  const [data, setData] = useState<Data | null>(null);\r\n  const id = useMemo(() => {\r\n    if (typeof window === \"undefined\") return \"\";\r\n    return new URLSearchParams(window.location.search).get(\"id\") || \"\";\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    try {\r\n      const key = `print:${id}`;\r\n      const raw = localStorage.getItem(key);\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw) as Data;\r\n        setData(parsed);\r\n        const t = setTimeout(() => {\r\n          try { window.print(); } catch {}\r\n        }, 250);\r\n\r\n        const handleAfterPrint = () => {\r\n          try { localStorage.removeItem(key); } catch {}\r\n          setTimeout(() => window.close(), 150);\r\n        };\r\n        window.addEventListener(\"afterprint\", handleAfterPrint, { once: true });\r\n\r\n        return () => {\r\n          clearTimeout(t);\r\n          window.removeEventListener(\"afterprint\", handleAfterPrint);\r\n        };\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Failed to load print data:\", e);\r\n    }\r\n  }, [id]);\r\n\r\n  if (!id || !data) {\r\n    return <div style={{ padding: 16, fontFamily: \"sans-serif\" }}><p>Loading receipt...</p></div>;\r\n  }\r\n\r\n  return (\r\n    <PrintReceipt\r\n      store={{ name: data.store?.name ?? \"YZY STORE\", address1: data.store?.address1 ?? \"Eastern Slide, Tuding\", address2: data.store?.address2 }}\r\n      customer={data.customer}\r\n      date={undefined}\r\n      items={data.items}\r\n      cartTotal={data.cartTotal}\r\n      amount={data.amount}\r\n      change={data.change}\r\n      points={data.points}\r\n    />\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAgBe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,KAAK,IAAA,gNAAO,EAAC;QACjB,wCAAmC,OAAO;;;IAE5C,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,IAAI;QACT,IAAI;YACF,MAAM,MAAM,CAAC,MAAM,EAAE,IAAI;YACzB,MAAM,MAAM,aAAa,OAAO,CAAC;YACjC,IAAI,KAAK;gBACP,MAAM,SAAS,KAAK,KAAK,CAAC;gBAC1B,QAAQ;gBACR,MAAM,IAAI,WAAW;oBACnB,IAAI;wBAAE,OAAO,KAAK;oBAAI,EAAE,OAAM,CAAC;gBACjC,GAAG;gBAEH,MAAM,mBAAmB;oBACvB,IAAI;wBAAE,aAAa,UAAU,CAAC;oBAAM,EAAE,OAAM,CAAC;oBAC7C,WAAW,IAAM,OAAO,KAAK,IAAI;gBACnC;gBACA,OAAO,gBAAgB,CAAC,cAAc,kBAAkB;oBAAE,MAAM;gBAAK;gBAErE,OAAO;oBACL,aAAa;oBACb,OAAO,mBAAmB,CAAC,cAAc;gBAC3C;YACF;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF,GAAG;QAAC;KAAG;IAEP,IAAI,CAAC,MAAM,CAAC,MAAM;QAChB,qBAAO,8OAAC;YAAI,OAAO;gBAAE,SAAS;gBAAI,YAAY;YAAa;sBAAG,cAAA,8OAAC;0BAAE;;;;;;;;;;;IACnE;IAEA,qBACE,8OAAC,yJAAY;QACX,OAAO;YAAE,MAAM,KAAK,KAAK,EAAE,QAAQ;YAAa,UAAU,KAAK,KAAK,EAAE,YAAY;YAAyB,UAAU,KAAK,KAAK,EAAE;QAAS;QAC1I,UAAU,KAAK,QAAQ;QACvB,MAAM;QACN,OAAO,KAAK,KAAK;QACjB,WAAW,KAAK,SAAS;QACzB,QAAQ,KAAK,MAAM;QACnB,QAAQ,KAAK,MAAM;QACnB,QAAQ,KAAK,MAAM;;;;;;AAGzB","debugId":null}}]
}