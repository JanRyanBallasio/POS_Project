{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/lib/axios.ts"],"sourcesContent":["import Axios, { AxiosError, AxiosRequestConfig, AxiosResponse } from 'axios';\r\n\r\n// Environment-based API configuration\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || 'http://3.107.238.186:5000/api';\r\n\r\nconst axios = Axios.create({\r\n  baseURL: API_BASE,\r\n  withCredentials: true,\r\n});\r\n\r\n// log the baseURL in browser console to verify which backend is used\r\nif (typeof window !== 'undefined') {\r\n  // eslint-disable-next-line no-console\r\n  console.debug('[api] axios baseURL =', API_BASE);\r\n  console.debug('[api] Environment =', process.env.NODE_ENV);\r\n}\r\n\r\n// ...existing code...\r\nlet isRefreshing = false;\r\nlet failedQueue: {\r\n  resolve: (value?: unknown) => void;\r\n  reject: (error: any) => void;\r\n  config: AxiosRequestConfig;\r\n}[] = [];\r\n\r\nconst processQueue = (error: any, token: string | null = null) => {\r\n  failedQueue.forEach(({ resolve, reject, config }) => {\r\n    if (error) return reject(error);\r\n    if (token && config && config.headers) config.headers['Authorization'] = `Bearer ${token}`;\r\n    resolve(axios(config));\r\n  });\r\n  failedQueue = [];\r\n};\r\nlet cachedToken: string | null = null;\r\nlet tokenLastFetched = 0;\r\nconst TOKEN_CACHE_TTL = 5000; // 5 seconds cache\r\n\r\naxios.interceptors.request.use((config) => {\r\n  try {\r\n    const url = (config.url || '').toString();\r\n    if (url.includes('/auth/')) return config;\r\n\r\n    // Cache token to avoid repeated localStorage access\r\n    const now = Date.now();\r\n    if (!cachedToken || (now - tokenLastFetched) > TOKEN_CACHE_TTL) {\r\n      cachedToken = typeof window !== 'undefined' ? localStorage.getItem('accessToken') : null;\r\n      tokenLastFetched = now;\r\n    }\r\n\r\n    if (cachedToken && config.headers) {\r\n      config.headers['Authorization'] = `Bearer ${cachedToken}`;\r\n    }\r\n  } catch (e) { }\r\n  return config;\r\n});\r\n// Clear cache when token changes\r\nconst originalSetAccessToken = setAccessToken;\r\nexport const setAccessTokenWithCache = (token: string | null) => {\r\n  cachedToken = token;\r\n  tokenLastFetched = Date.now();\r\n  originalSetAccessToken(token);\r\n};\r\naxios.interceptors.response.use(\r\n  (response: AxiosResponse) => response,\r\n  async (error: AxiosError & { config?: AxiosRequestConfig }) => {\r\n    const originalConfig = error.config;\r\n    if (!originalConfig) return Promise.reject(error);\r\n\r\n    // If 401 and not a refresh attempt, try refresh\r\n    // @ts-ignore\r\n    if (error.response && error.response.status === 401 && !originalConfig._retry) {\r\n      if (isRefreshing) {\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject, config: originalConfig });\r\n        });\r\n      }\r\n\r\n      // @ts-ignore\r\n      originalConfig._retry = true;\r\n      isRefreshing = true;\r\n\r\n      try {\r\n        const refreshResp = await axios.post('/auth/refresh'); // cookie sent automatically\r\n        const newToken = (refreshResp.data && refreshResp.data.accessToken) || null;\r\n        if (newToken) {\r\n          try {\r\n            localStorage.setItem('accessToken', newToken);\r\n          } catch (e) { }\r\n        }\r\n        processQueue(null, newToken);\r\n        return axios(originalConfig);\r\n      } catch (refreshErr) {\r\n        processQueue(refreshErr, null);\r\n        // clear stored tokens & user\r\n        try {\r\n          localStorage.removeItem('accessToken');\r\n          localStorage.removeItem('user');\r\n        } catch (e) { }\r\n        return Promise.reject(refreshErr);\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport { API_BASE }; // <-- export canonical API base for other modules to import\r\nexport default axios;"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,sCAAsC;AACtC,MAAM,WAAW,iEAAmC;AAEpD,MAAM,QAAQ,gJAAK,CAAC,MAAM,CAAC;IACzB,SAAS;IACT,iBAAiB;AACnB;AAEA,qEAAqE;AACrE;;AAMA,sBAAsB;AACtB,IAAI,eAAe;AACnB,IAAI,cAIE,EAAE;AAER,MAAM,eAAe,CAAC,OAAY,QAAuB,IAAI;IAC3D,YAAY,OAAO,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE;QAC9C,IAAI,OAAO,OAAO,OAAO;QACzB,IAAI,SAAS,UAAU,OAAO,OAAO,EAAE,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAC1F,QAAQ,MAAM;IAChB;IACA,cAAc,EAAE;AAClB;AACA,IAAI,cAA6B;AACjC,IAAI,mBAAmB;AACvB,MAAM,kBAAkB,MAAM,kBAAkB;AAEhD,MAAM,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC9B,IAAI;QACF,MAAM,MAAM,CAAC,OAAO,GAAG,IAAI,EAAE,EAAE,QAAQ;QACvC,IAAI,IAAI,QAAQ,CAAC,WAAW,OAAO;QAEnC,oDAAoD;QACpD,MAAM,MAAM,KAAK,GAAG;QACpB,IAAI,CAAC,eAAe,AAAC,MAAM,mBAAoB,iBAAiB;YAC9D,cAAc,sCAAgC,0BAAsC;YACpF,mBAAmB;QACrB;QAEA,IAAI,eAAe,OAAO,OAAO,EAAE;YACjC,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,aAAa;QAC3D;IACF,EAAE,OAAO,GAAG,CAAE;IACd,OAAO;AACT;AACA,iCAAiC;AACjC,MAAM,yBAAyB;AACxB,MAAM,0BAA0B,CAAC;IACtC,cAAc;IACd,mBAAmB,KAAK,GAAG;IAC3B,uBAAuB;AACzB;AACA,MAAM,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC7B,CAAC,WAA4B,UAC7B,OAAO;IACL,MAAM,iBAAiB,MAAM,MAAM;IACnC,IAAI,CAAC,gBAAgB,OAAO,QAAQ,MAAM,CAAC;IAE3C,gDAAgD;IAChD,aAAa;IACb,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,OAAO,CAAC,eAAe,MAAM,EAAE;QAC7E,IAAI,cAAc;YAChB,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,YAAY,IAAI,CAAC;oBAAE;oBAAS;oBAAQ,QAAQ;gBAAe;YAC7D;QACF;QAEA,aAAa;QACb,eAAe,MAAM,GAAG;QACxB,eAAe;QAEf,IAAI;YACF,MAAM,cAAc,MAAM,MAAM,IAAI,CAAC,kBAAkB,4BAA4B;YACnF,MAAM,WAAW,AAAC,YAAY,IAAI,IAAI,YAAY,IAAI,CAAC,WAAW,IAAK;YACvE,IAAI,UAAU;gBACZ,IAAI;oBACF,aAAa,OAAO,CAAC,eAAe;gBACtC,EAAE,OAAO,GAAG,CAAE;YAChB;YACA,aAAa,MAAM;YACnB,OAAO,MAAM;QACf,EAAE,OAAO,YAAY;YACnB,aAAa,YAAY;YACzB,6BAA6B;YAC7B,IAAI;gBACF,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;YAC1B,EAAE,OAAO,GAAG,CAAE;YACd,OAAO,QAAQ,MAAM,CAAC;QACxB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;;uCAIa","debugId":null}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/stores/userStore.ts"],"sourcesContent":["export function setAccessToken(token: string | null) {\r\n  try {\r\n    if (token) localStorage.setItem('accessToken', token);\r\n    else localStorage.removeItem('accessToken');\r\n  } catch (e) {}\r\n}\r\n\r\nexport function getAccessToken(): string | null {\r\n  try {\r\n    return localStorage.getItem('accessToken');\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function setUser(obj: any | null) {\r\n  try {\r\n    if (obj) localStorage.setItem('user', JSON.stringify(obj));\r\n    else localStorage.removeItem('user');\r\n  } catch (e) {}\r\n}\r\n\r\nexport function getUser(): any | null {\r\n  try {\r\n    const v = localStorage.getItem('user');\r\n    return v ? JSON.parse(v) : null;\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function clearAuth() {\r\n  try {\r\n    localStorage.removeItem('accessToken');\r\n    localStorage.removeItem('user');\r\n  } catch (e) {}\r\n}"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,eAAe,KAAoB;IACjD,IAAI;QACF,IAAI,OAAO,aAAa,OAAO,CAAC,eAAe;aAC1C,aAAa,UAAU,CAAC;IAC/B,EAAE,OAAO,GAAG,CAAC;AACf;AAEO,SAAS;IACd,IAAI;QACF,OAAO,aAAa,OAAO,CAAC;IAC9B,EAAE,OAAO,GAAG;QACV,OAAO;IACT;AACF;AAEO,SAAS,QAAQ,GAAe;IACrC,IAAI;QACF,IAAI,KAAK,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;aAChD,aAAa,UAAU,CAAC;IAC/B,EAAE,OAAO,GAAG,CAAC;AACf;AAEO,SAAS;IACd,IAAI;QACF,MAAM,IAAI,aAAa,OAAO,CAAC;QAC/B,OAAO,IAAI,KAAK,KAAK,CAAC,KAAK;IAC7B,EAAE,OAAO,GAAG;QACV,OAAO;IACT;AACF;AAEO,SAAS;IACd,IAAI;QACF,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC1B,EAAE,OAAO,GAAG,CAAC;AACf","debugId":null}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/hooks/useAuthGuard.ts"],"sourcesContent":["'use client';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from '@/lib/axios';\r\nimport { getAccessToken, getUser } from '@/stores/userStore';\r\n\r\nexport function useRedirectIfAuth(redirectTo = '/dashboard/main') {\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    // Check for existing valid token first\r\n    const token = getAccessToken();\r\n    if (token) {\r\n      // Quick token validation - check if it's not expired\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        const isExpired = payload.exp * 1000 < Date.now();\r\n        if (!isExpired) {\r\n          router.replace(redirectTo);\r\n          return;\r\n        }\r\n      } catch (e) {\r\n        // Invalid token, remove it\r\n        localStorage.removeItem('accessToken');\r\n      }\r\n    }\r\n\r\n    // Only attempt refresh if we have clear indication of existing session\r\n    const hasRefreshCookie = typeof window !== 'undefined' && \r\n      document.cookie.includes('refreshToken=');\r\n    \r\n    if (!hasRefreshCookie) return; // No refresh token, don't attempt\r\n\r\n    // Attempt refresh only once\r\n    (async () => {\r\n      try {\r\n        const resp = await axios.post('/auth/refresh');\r\n        const newToken = resp.data?.accessToken;\r\n        if (newToken) {\r\n          localStorage.setItem('accessToken', newToken);\r\n          router.replace(redirectTo);\r\n        }\r\n      } catch (err) {\r\n        // Clean up stale data\r\n        localStorage.removeItem('user');\r\n        localStorage.removeItem('accessToken');\r\n        console.debug('Refresh failed, cleaned up stale session');\r\n      }\r\n    })();\r\n  }, []); // Remove dependencies to prevent re-runs\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;AAMO,SAAS,kBAAkB,aAAa,iBAAiB;IAC9D,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,uCAAuC;QACvC,MAAM,QAAQ,IAAA,4IAAc;QAC5B,IAAI,OAAO;YACT,qDAAqD;YACrD,IAAI;gBACF,MAAM,UAAU,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;gBACnD,MAAM,YAAY,QAAQ,GAAG,GAAG,OAAO,KAAK,GAAG;gBAC/C,IAAI,CAAC,WAAW;oBACd,OAAO,OAAO,CAAC;oBACf;gBACF;YACF,EAAE,OAAO,GAAG;gBACV,2BAA2B;gBAC3B,aAAa,UAAU,CAAC;YAC1B;QACF;QAEA,uEAAuE;QACvE,MAAM,mBAAmB,gBAAkB,eACzC,SAAS,MAAM,CAAC,QAAQ,CAAC;QAE3B,wCAAuB,QAAQ,kCAAkC;;;IAkBnE,GAAG,EAAE,GAAG,yCAAyC;AACnD","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/hooks/users/user.ts"],"sourcesContent":["// ...existing code...\r\nimport axios from '@/lib/axios';\r\n\r\nasync function handleResponseData(resp: any) {\r\n  const data = resp?.data ?? {};\r\n  if (resp?.status >= 400) throw new Error(data?.message || data?.error || 'Request failed');\r\n  return data;\r\n}\r\n\r\nexport async function registerUser(payload: { fullname: string; username: string; password: string; }) {\r\n  // backend expects `name` not `fullname`\r\n  const body = { name: payload.fullname, username: payload.username, password: payload.password };\r\n  const resp = await axios.post('/auth/register', body);\r\n  return handleResponseData(resp);\r\n}\r\n\r\nexport async function loginUser(payload: { username: string; password: string; }) {\r\n  const resp = await axios.post('/auth/login', payload);\r\n  return handleResponseData(resp);\r\n}\r\n// ...existing code..."],"names":[],"mappings":"AAAA,sBAAsB;;;;;;;AACtB;;AAEA,eAAe,mBAAmB,IAAS;IACzC,MAAM,OAAO,MAAM,QAAQ,CAAC;IAC5B,IAAI,MAAM,UAAU,KAAK,MAAM,IAAI,MAAM,MAAM,WAAW,MAAM,SAAS;IACzE,OAAO;AACT;AAEO,eAAe,aAAa,OAAkE;IACnG,wCAAwC;IACxC,MAAM,OAAO;QAAE,MAAM,QAAQ,QAAQ;QAAE,UAAU,QAAQ,QAAQ;QAAE,UAAU,QAAQ,QAAQ;IAAC;IAC9F,MAAM,OAAO,MAAM,8HAAK,CAAC,IAAI,CAAC,kBAAkB;IAChD,OAAO,mBAAmB;AAC5B;AAEO,eAAe,UAAU,OAAgD;IAC9E,MAAM,OAAO,MAAM,8HAAK,CAAC,IAAI,CAAC,eAAe;IAC7C,OAAO,mBAAmB;AAC5B,EACA,sBAAsB","debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///D:/Code/POS_Project/pos-frontend/src/app/%28authentication%29/login/page.tsx"],"sourcesContent":["// ...existing code...\r\n'use client';\r\n\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useId, useState } from 'react';\r\nimport { EyeIcon, EyeOffIcon } from 'lucide-react';\r\nimport Image from \"next/image\";\r\nimport { UserIcon, KeyRound } from 'lucide-react';\r\nimport { useRedirectIfAuth } from '@/hooks/useAuthGuard';\r\n\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { useRouter } from 'next/navigation';\r\nimport { loginUser } from '@/hooks/users/user';\r\n\r\nexport default function LoginForm() {\r\n    useRedirectIfAuth();\r\n    const [isVisible, setIsVisible] = useState(false)\r\n    const id = useId()\r\n    const router = useRouter();\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const onSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!username || !password) {\r\n            alert(\"Enter username and password\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const res = await loginUser({ username, password });\r\n            console.debug('[login] response', res);\r\n            console.debug('[login] FULL response:', JSON.stringify(res, null, 2));\r\n\r\n            // Save accessToken (key expected by axios/interceptors) and user\r\n            if (res?.accessToken) {\r\n                localStorage.setItem(\"accessToken\", res.accessToken);\r\n                console.debug('[login] accessToken saved:', res.accessToken);\r\n            } else {\r\n                console.error('[login] No accessToken in response:', res);\r\n            }\r\n\r\n            if (res?.data) {\r\n                localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n                console.debug('[login] user data saved');\r\n            } else {\r\n                console.error('[login] No user data in response:', res);\r\n            }\r\n\r\n            // try client navigation first, fallback to full navigation (forces request -> middleware)\r\n            try {\r\n                await router.push(\"/dashboard/main\");\r\n                console.debug('[login] router.push complete');\r\n            } catch (navErr) {\r\n                console.warn('[login] router.push failed, falling back to full navigation', navErr);\r\n                window.location.href = \"/dashboard/main\";\r\n            }\r\n        } catch (err: any) {\r\n            console.error('[login] Error:', err);\r\n            alert(err.message || \"Login failed\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n\r\n        <div className=\"min-h-screen flex items-center justify-center bg-white\">\r\n            <div className=\"w-full max-w-sm flex flex-col items-center gap-6 pb-[60px] px-2\">\r\n                <div className=\"flex flex-col items-center gap-2\">\r\n                    <Image src=\"/img/logo1.png\" alt=\"App logo\" width={150} height={150} />\r\n                    <p className=\"font-bold text-2xl\">Login</p>\r\n                </div>\r\n\r\n                <form className='w-full space-y-4' onSubmit={onSubmit}>\r\n                    <div className='w-full'>\r\n                        <Label htmlFor={`${id}-username`} className='text-sm'>Username</Label>\r\n                        <div className='relative mt-1'>\r\n                            <div className='text-muted-foreground pointer-events-none absolute inset-y-0 left-0 flex items-center ps-3'>\r\n                                <UserIcon className='w-4 h-4' />\r\n                                <span className='sr-only'>User</span>\r\n                            </div>\r\n                            <Input id={`${id}-username`} type='text' placeholder='Username' className='peer ps-9' value={username} onChange={(e) => setUsername(e.target.value)} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className='w-full'>\r\n                        <Label htmlFor={`${id}-password`} className='text-sm'>Password</Label>\r\n                        <div className='relative mt-1'>\r\n                            <div className='text-muted-foreground pointer-events-none absolute inset-y-0 left-0 flex items-center ps-3'>\r\n                                <KeyRound className='w-4 h-4' />\r\n                                <span className='sr-only'>Password</span>\r\n                            </div>\r\n                            <Input id={`${id}-password`} type={isVisible ? 'text' : 'password'} placeholder='Password' className='peer ps-9' value={password} onChange={(e) => setPassword(e.target.value)} />\r\n                            <Button\r\n                                variant='ghost'\r\n                                size='icon'\r\n                                onClick={() => setIsVisible(prev => !prev)}\r\n                                className='text-muted-foreground absolute inset-y-0 right-0 rounded-s-none hover:bg-transparent'\r\n                                type='button'\r\n                            >\r\n                                {isVisible ? <EyeIcon /> : <EyeOffIcon />}\r\n                                <span className='sr-only'>{isVisible ? 'Hide password' : 'Show password'}</span>\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Button className='w-full bg-black text-white rounded-md' type=\"submit\" disabled={loading}>{loading ? \"Please wait...\" : \"Login\"}</Button>\r\n                </form>\r\n\r\n                <div className=\"text-center text-sm mt-2\">\r\n                    Don&apos;t have an account?{\" \"}\r\n                    <Link href=\"/register\" className=\"underline underline-offset-4\">\r\n                        Sign up\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n// ...existing code..."],"names":[],"mappings":"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","debugId":null}}]
}