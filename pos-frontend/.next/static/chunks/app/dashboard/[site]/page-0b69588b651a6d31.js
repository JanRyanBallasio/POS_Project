(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{50477:()=>{},68529:(e,t,a)=>{Promise.resolve().then(a.bind(a,98063))},98063:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tk});var s=a(95155),r=a(12115),l=a(78121);let n=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)([]),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),h=async e=>{try{u(!0),c(null);let t=await l.G.getByBarcode(e);t?o(e=>{if(e.find(e=>e.product.barcode===t.barcode))return e.map(e=>e.product.barcode===t.barcode?{...e,quantity:e.quantity+1}:e);{let a={product:t,quantity:1,id:Date.now().toString()};return[...e,a]}}):c("Product not found: ".concat(e))}catch(e){c(e instanceof Error?e.message:"Error scanning barcode")}finally{u(!1)}},f=(0,r.useMemo)(()=>a.reduce((e,t)=>e+t.product.price*t.quantity,0),[a]);return(0,s.jsx)(n.Provider,{value:{cart:a,cartTotal:f,scanError:i,isScanning:d,scanAndAddToCart:h,refocusScanner:()=>{setTimeout(()=>{(null==x?void 0:x.current)&&x.current.focus()},100)},setScannerRef:e=>{m(e)},updateCartItemQuantity:(e,t)=>{o(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>o([])},children:t})},i=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e},c=e=>{let{cart:t,updateCartItemQuantity:a}=i();(0,r.useEffect)(()=>{let s=s=>{if(e){if("+"===s.key){let s=t.find(t=>t.id===e);s&&a(s.id,s.quantity+1)}if("-"===s.key){let s=t.find(t=>t.id===e);s&&s.quantity>1&&a(s.id,s.quantity-1)}}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,t,a])};var d=a(59434);function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,d.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,d.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,d.cn)("leading-none font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,d.cn)("text-muted-foreground text-sm",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-action",className:(0,d.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,d.cn)("px-6",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,d.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}var j=a(30285);let v=[{id:"1",name:"Juan Dela Cruz",points:12},{id:"2",name:"Maria Santos",points:25},{id:"3",name:"Pedro Reyes",points:7},{id:"4",name:"Ana Lopez",points:40}];var b=a(62523),y=a(85057);function N(e){let{amount:t,setAmount:a,cartTotal:r,refocusScanner:l,onNext:n,cartIsEmpty:o=!1}=e,i=e=>{if("C"===e)a("");else if("⌫"===e)a(t.slice(0,-1));else{if("."===e&&t.includes("."))return;a(t+e)}l()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.J,{className:"text-lg mb-2 font-medium",children:"Cash"}),(0,s.jsx)(b.p,{className:"h-20 !text-5xl text-right font-medium mb-6 border-2 border-gray-300 shadow-sm placeholder:text-5xl placeholder:font-medium placeholder:text-gray-400",value:t,onChange:e=>{a(e.target.value),setTimeout(l,3e3)},placeholder:"0.00",onBlur:l,onClick:e=>e.stopPropagation(),disabled:o}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-2 bg-gray-50 p-3 rounded-lg",children:[[7,8,9,4,5,6,1,2,3].map(e=>(0,s.jsx)(j.$,{onClick:()=>i(e.toString()),variant:"outline",className:"h-16 text-2xl font-medium",disabled:o,children:e},e)),(0,s.jsx)(j.$,{onClick:()=>i("."),variant:"outline",className:"h-16 text-2xl font-medium",disabled:o,children:"."}),(0,s.jsx)(j.$,{onClick:()=>i("0"),variant:"outline",className:"h-16 text-2xl font-medium",disabled:o,children:"0"}),(0,s.jsx)(j.$,{onClick:()=>i("⌫"),variant:"outline",className:"h-16 text-2xl font-medium",disabled:o,children:"⌫"}),(0,s.jsx)(j.$,{onClick:()=>i("C"),variant:"outline",className:"h-16 text-2xl font-medium col-span-3",disabled:o,children:"Clear"})]}),(0,s.jsx)("div",{className:"px-4 pb-4 pt-4",children:(0,s.jsx)(j.$,{className:"w-full h-14 text-xl font-medium",onClick:n,disabled:o||!t||parseFloat(t)<r,children:"Next"})})]})}var w=a(47924);function S(e){let{customerQuery:t,setCustomerQuery:a,filteredCustomers:r,selectedCustomer:l,selectCustomer:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.J,{htmlFor:"customer-search",className:"mb-2 mt-4",children:"Customer Name"}),(0,s.jsxs)("div",{className:"relative mb-2",children:[(0,s.jsx)(w.A,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)(b.p,{id:"customer-search",className:"pl-9",placeholder:"Search Name",value:t,onClick:e=>e.stopPropagation(),onChange:e=>a(e.target.value),autoComplete:"off"}),t&&!l&&(0,s.jsxs)("div",{className:"absolute z-10 left-0 right-0 bg-white border rounded shadow max-h-40 overflow-y-auto",children:[0===r.length&&(0,s.jsx)("div",{className:"p-2 text-gray-500 text-center",children:"No results"}),r.map(e=>(0,s.jsxs)("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex justify-between",onClick:()=>n(e),children:[(0,s.jsx)("span",{children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[e.points," pts"]})]},e.id))]})]})]})}function C(e){let{amount:t,cartTotal:a,change:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"py-5 border-t border-b",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xl mb-3",children:[(0,s.jsx)("span",{children:"Amount Paid:"}),(0,s.jsxs)("span",{className:"font-medium",children:["₱ ",parseFloat(t).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xl mb-3",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{className:"font-medium",children:["₱ ",a.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-3xl font-bold pt-5",children:[(0,s.jsx)("span",{children:"Change:"}),(0,s.jsxs)("span",{children:["₱ ",r.toFixed(2)]})]})]})}function k(e){let{selectedCustomer:t,cartTotal:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Transaction Successful!"}),(0,s.jsx)("p",{className:"mb-8",children:"Thank you for your purchase."})]})}var _=a(28890);let z=_.vv.create({page:{backgroundColor:"#fff",color:"#262626",fontFamily:"Roboto",fontSize:12,padding:12},header:{textAlign:"center",marginBottom:4},pharmacy:{fontSize:18,fontWeight:"bold",marginBottom:2},address:{fontSize:10,marginBottom:6},divider:{borderBottomWidth:1.5,borderBottomColor:"#000",borderStyle:"dashed",marginVertical:8},row:{flexDirection:"row",justifyContent:"space-between",marginBottom:2},bold:{fontWeight:"bold"},tableHeader:{flexDirection:"row",borderBottomWidth:1.5,borderBottomColor:"#000",borderStyle:"dashed",marginBottom:2,fontWeight:"bold",paddingTop:4,paddingBottom:4},colDesc:{width:"45%"},colQty:{width:"20%",textAlign:"center"},colAmount:{width:"35%",textAlign:"right"},totalRow:{flexDirection:"row",justifyContent:"flex-end",marginTop:8,fontWeight:"bold",fontSize:13},footer:{textAlign:"center",marginTop:8,fontSize:10},solution:{textAlign:"center",marginTop:8,fontSize:10,fontWeight:"bold"}});_.KQ.register({family:"Roboto",src:"/fonts/Roboto/Roboto-VariableFont_wdth,wght.ttf"});let A=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"2-digit"});function D(e){let{cartTotal:t,amount:a,change:r,customer:l,items:n}=e,o=280+20*n.length;return(0,s.jsx)(_.yo,{children:(0,s.jsxs)(_.YW,{size:[227,o],style:z.page,children:[(0,s.jsxs)(_.Ss,{style:z.header,children:[(0,s.jsx)(_.EY,{style:z.pharmacy,children:"STORE DA"}),(0,s.jsx)(_.EY,{style:z.address,children:"Itoy Igid"})]}),(0,s.jsx)(_.Ss,{style:z.divider}),(0,s.jsxs)(_.Ss,{style:z.row,children:[(0,s.jsx)(_.EY,{style:z.bold,children:"Customer:"}),(0,s.jsx)(_.EY,{children:(null==l?void 0:l.name)||"N/A"})]}),(0,s.jsx)(_.Ss,{style:z.row,children:(0,s.jsxs)(_.EY,{children:[(0,s.jsx)(_.EY,{style:z.bold,children:"Date:"})," ",A]})}),(0,s.jsx)(_.Ss,{style:z.divider}),(0,s.jsxs)(_.Ss,{style:z.tableHeader,children:[(0,s.jsx)(_.EY,{style:z.colDesc,children:"Description"}),(0,s.jsx)(_.EY,{style:z.colQty,children:"Qty"}),(0,s.jsx)(_.EY,{style:z.colAmount,children:"Amount"})]}),n.map((e,t)=>(0,s.jsxs)(_.Ss,{style:z.row,children:[(0,s.jsx)(_.EY,{style:z.colDesc,children:e.desc}),(0,s.jsx)(_.EY,{style:z.colQty,children:e.qty}),(0,s.jsx)(_.EY,{style:z.colAmount,children:e.amount.toFixed(2)})]},t)),(0,s.jsx)(_.Ss,{style:z.divider}),(0,s.jsxs)(_.Ss,{style:z.totalRow,children:[(0,s.jsx)(_.EY,{children:"Total: "}),(0,s.jsxs)(_.EY,{style:{fontWeight:"bold",marginLeft:8},children:["₱",t.toFixed(2)]})]}),(0,s.jsxs)(_.Ss,{style:z.row,children:[(0,s.jsx)(_.EY,{children:"Amount:"}),(0,s.jsxs)(_.EY,{children:["₱",parseFloat(a||"0").toFixed(2)]})]}),(0,s.jsxs)(_.Ss,{style:z.row,children:[(0,s.jsx)(_.EY,{children:"Change:"}),(0,s.jsxs)(_.EY,{children:["₱",r.toFixed(2)]})]}),(0,s.jsx)(_.Ss,{style:z.divider}),(0,s.jsx)(_.EY,{style:z.solution,children:"GATANG KA MANNEN!"})]})})}function E(e){let{step:t,setStep:a}=e,{cart:l,cartTotal:n,refocusScanner:o,clearCart:c}=i(),[d,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(0);(0,r.useEffect)(()=>{h((parseFloat(d)||0)-n)},[d,n]);let{customerQuery:f,setCustomerQuery:b,filteredCustomers:y,selectedCustomer:w,selectCustomer:z,clearCustomer:A}=function(){let[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)(v),[l,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{s(v.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())))},[e]),{customerQuery:e,setCustomerQuery:t,filteredCustomers:a,selectedCustomer:l,selectCustomer:e=>{n(e),t(e.name)},clearCustomer:()=>{n(null),t("")}}}(),E=async()=>{let e=await (0,_.x8)((0,s.jsx)(D,{cartTotal:n,amount:d,change:m,customer:w,items:l.map(e=>({desc:e.product.name,qty:e.quantity,amount:e.product.price*e.quantity}))})).toBlob(),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="receipt-".concat(Date.now(),".pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},L=async()=>{await fetch("http://13.211.162.106:5000/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:(null==w?void 0:w.id)||null,total_purchase:n,items:l.map(e=>({product_id:e.product.id,quantity:e.quantity,price:e.product.price}))})}),a(1),x(""),A(),h(0),o(),c()};return(0,s.jsx)(u,{className:"h-full flex flex-col",onClick:()=>o(),children:(0,s.jsxs)(p,{className:"flex-1 flex flex-col p-4 pb-0",children:[(0,s.jsx)("h1",{className:"text-xl font-medium",children:"Total"}),(0,s.jsx)("div",{className:"w-full py-3 mb-2",children:(0,s.jsxs)("div",{className:"flex justify-between text-5xl font-medium",children:[(0,s.jsx)("h1",{children:"₱"}),(0,s.jsx)("h1",{children:n.toFixed(2)})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[1===t&&(0,s.jsx)(N,{amount:d,setAmount:x,cartTotal:n,refocusScanner:o,onNext:()=>{let e=parseFloat(d)||0;e>=n?(h(e-n),a(2)):alert("Insufficient amount")},cartIsEmpty:0===l.length}),2===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C,{amount:d,cartTotal:n,change:m}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(S,{customerQuery:f,setCustomerQuery:b,filteredCustomers:y,selectedCustomer:w,selectCustomer:z}),(0,s.jsxs)(g,{className:"px-4 pb-4 pt-4 flex flex-col gap-3",children:[(0,s.jsx)(j.$,{className:"w-full h-14 text-xl font-medium",variant:"outline",onClick:()=>a(1),children:"Back"}),(0,s.jsx)(j.$,{className:"w-full h-14 text-xl font-medium",onClick:()=>a(3),children:"Next"})]})]}),3===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k,{selectedCustomer:w,cartTotal:n}),(0,s.jsxs)(g,{className:"px-4 pb-4 pt-4 flex flex-col gap-2",children:[(0,s.jsx)(j.$,{className:"w-full h-14 text-xl font-medium",onClick:E,children:"Print Receipt"}),(0,s.jsx)(j.$,{className:"w-full h-14 text-xl font-medium",variant:"outline",onClick:L,children:"Finish Transaction"})]})]})]})]})})}var L=a(34953);let F=async()=>await l.G.getAll(),P=()=>{let{data:e,error:t,isLoading:a,mutate:s}=(0,L.Ay)("http://13.211.162.106:5000/api/products",F);return{products:e||[],loading:a,error:t,refetch:s}},q=e=>{let[t,a]=(0,r.useState)(""),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{s.current&&s.current.focus()},[]),{barcodeInput:t,inputRef:s,handleBarcodeChange:t=>{let s=t.target.value;if(a(s),s.includes("\n")||s.includes("\r")){let t=s.replace(/[\n\r]/g,"").trim();t&&(e(t),a(""))}},handleKeyPress:s=>{"Enter"===s.key&&(s.preventDefault(),t.trim()&&(e(t.trim()),a("")))},refocusScanner:()=>{setTimeout(()=>{s.current&&s.current.focus()},100)}}},$=e=>{let[t,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),n=(0,r.useMemo)(()=>t.trim().length<2?[]:e.filter(e=>{var a;return e.name.toLowerCase().includes(t.toLowerCase())||(null==(a=e.barcode)?void 0:a.includes(t))}),[e,t]);return{searchQuery:t,searchResults:n,showSearchResults:s,handleSearchChange:e=>{a(e),l(e.trim().length>=2)},clearSearch:()=>{a(""),l(!1)}}};function M(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,d.cn)("w-full caption-bottom text-sm",t),...a})})}function R(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,d.cn)("[&_tr]:border-b",t),...a})}function T(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,d.cn)("[&_tr:last-child]:border-0",t),...a})}function O(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,d.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function B(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,d.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function Y(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,d.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function K(e){let{cart:t,selectedRowId:a,selectRow:r,updateCartItemQuantity:l,disabled:n=!1}=e;return 0===t.length?(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center w-full h-full",children:(0,s.jsx)("span",{className:"text-center text-gray-500",children:"\uD83D\uDED2 Scan items to add to cart"})}):(0,s.jsxs)(M,{children:[(0,s.jsx)(R,{children:(0,s.jsxs)(O,{children:[(0,s.jsx)(B,{className:"text-lg font-semibold",children:"Barcode"}),(0,s.jsx)(B,{className:"text-lg font-semibold",children:"Name"}),(0,s.jsx)(B,{className:"text-lg font-semibold",children:"Price"}),(0,s.jsx)(B,{className:"text-lg font-semibold",children:"Quantity"}),(0,s.jsx)(B,{className:"text-lg font-semibold",children:"Discount"})]})}),(0,s.jsx)(T,{children:t.map(e=>(0,s.jsxs)(O,{className:"hover:bg-gray-50 cursor-pointer ".concat(a===e.id?"bg-gray-100":""),onClick:()=>r(e.id),children:[(0,s.jsx)(Y,{className:"font-medium",children:e.product.barcode||"N/A"}),(0,s.jsx)(Y,{children:e.product.name}),(0,s.jsxs)(Y,{children:["₱ ",e.product.price.toFixed(2)]}),(0,s.jsx)(Y,{children:(0,s.jsx)(b.p,{type:"number",min:1,value:e.quantity,className:"w-16",onClick:e=>e.stopPropagation(),onChange:t=>{let a=Math.max(1,Number(t.target.value));l(e.id,a)},disabled:n})}),(0,s.jsx)(Y,{children:"₱ 0.00"})]},e.id))})]})}function I(e){let{searchQuery:t,searchResults:a,showSearchResults:r,handleSearchChange:l,handleSearchSelect:n,refocusScanner:o,disabled:i=!1}=e;return(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)(w.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)(b.p,{className:"pl-9 w-full",placeholder:"Search by product name or barcode...",value:t,onChange:e=>l(e.target.value),onClick:e=>e.stopPropagation(),onBlur:o,disabled:i})]}),r&&a.length>0&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:a.map(e=>(0,s.jsx)("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",onClick:()=>n(e),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Barcode: ",e.barcode]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("div",{className:"font-medium",children:["₱ ",e.price.toFixed(2)]})})]})},e.id))}),r&&0===a.length&&t.length>=2&&(0,s.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border rounded-md shadow-lg z-10 p-3 text-center text-gray-500",children:['No products found matching "',t,'"']})]})}function W(e){let{inputRef:t,barcodeInput:a,handleBarcodeChange:r,handleKeyPress:l,disabled:n=!1}=e;return(0,s.jsx)(b.p,{ref:t,className:"opacity-0 absolute -top-1000",value:a,onChange:r,onKeyPress:l,placeholder:"Scanner input...",disabled:n})}var H=a(88076),G=a(90010),U=a(20881);function Q(e){let{step:t}=e,{selectedRowId:a,selectRow:l}=function(){let[e,t]=(0,r.useState)(null);return{selectedRowId:e,selectRow:e=>t(e),clearSelection:()=>t(null)}}(),{products:n}=P(),{cart:o,updateCartItemQuantity:d,scanAndAddToCart:x,setScannerRef:m,refocusScanner:h}=i(),{barcodeInput:f,inputRef:g,handleBarcodeChange:j,handleKeyPress:v}=q(function(e){n.find(t=>t.barcode===e)?(x(e),h()):(D(e),z(!0))}),{setOpen:b,setBarcode:y}=(0,H.c)();c(a);let{searchQuery:N,searchResults:w,showSearchResults:S,handleSearchChange:C,clearSearch:k}=$(n),[_,z]=(0,r.useState)(!1),[A,D]=(0,r.useState)(null);return(0,r.useEffect)(()=>{m(g)},[m,g]),(0,r.useEffect)(()=>{(2===t||3===t)&&(null==g?void 0:g.current)&&g.current.blur()},[t]),(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)(u,{className:"w-full h-full flex flex-col",onClick:()=>h(),children:(0,s.jsxs)(p,{className:"p-6 flex-1 flex flex-col min-h-0",children:[(0,s.jsx)(W,{inputRef:g,barcodeInput:f,handleBarcodeChange:j,handleKeyPress:v,disabled:2===t||3===t}),(0,s.jsx)(I,{searchQuery:N,searchResults:w,showSearchResults:S,handleSearchChange:C,handleSearchSelect:e=>{x(e.barcode||""),k(),h()},clearSearch:k,refocusScanner:h,disabled:2===t||3===t}),(0,s.jsx)("div",{className:"rounded-md border flex-1 flex flex-col min-h-0 overflow-auto relative",children:(0,s.jsx)(K,{cart:o,selectedRowId:a,selectRow:l,updateCartItemQuantity:d,disabled:2===t||3===t})})]})}),(0,s.jsx)(U.default,{}),(0,s.jsx)(G.Lt,{open:_,onOpenChange:z,children:(0,s.jsxs)(G.EO,{children:[(0,s.jsxs)(G.wd,{children:[(0,s.jsx)(G.r7,{children:"Product Not Registered"}),(0,s.jsxs)(G.$v,{children:["The scanned product (",(0,s.jsx)("span",{className:"font-bold",children:A}),") is not registered. Would you like to register it?"]})]}),(0,s.jsxs)(G.ck,{children:[(0,s.jsx)(G.Zr,{onClick:()=>z(!1),children:"Cancel"}),(0,s.jsx)(G.Rx,{onClick:function(){z(!1),y(A),b(!0)},children:"Register Product"})]})]})})]})}function J(){let[e,t]=(0,r.useState)(1);return(0,s.jsx)(o,{children:(0,s.jsx)("div",{className:"flex flex-col w-full h-full py-4 px-4",children:(0,s.jsxs)("div",{className:"flex gap-2 h-full",children:[(0,s.jsx)("div",{className:"flex-[70%]",children:(0,s.jsx)(Q,{step:e})}),(0,s.jsx)("div",{className:"flex flex-col flex-[30%] gap-2",children:(0,s.jsx)(E,{step:e,setStep:t})})]})})})}var V=a(84616),Z=a(54165),X=a(37391);function ee(e){let{onProductAdded:t}=e,[a,l]=(0,r.useState)(""),{open:n,setOpen:o,barcode:i,setBarcode:c}=(0,H.c)(),[d,u]=(0,r.useState)(""),[x,m]=(0,r.useState)(0),[h,f]=(0,r.useState)(0),[p,g]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),{addProduct:w,loading:S,error:C,success:k,reset:_}=(0,X.O)(),z=async()=>{let e={name:a,barcode:null!=i?i:"",category_id:Number(d),price:Number(x),quantity:Number(h)},s=await w(e);s&&t&&(t(s),l(""),c(""),u(""),m(0),f(0)),o(!1),g(!0)};return(0,s.jsxs)("div",{className:"flex justify-between items-center h-full",children:[(0,s.jsx)("div",{className:"text-4xl font-bold",children:(0,s.jsx)("h1",{children:"Products"})}),(0,s.jsxs)(Z.lG,{open:n,onOpenChange:o,children:[(0,s.jsx)(Z.zM,{asChild:!0,children:(0,s.jsxs)(j.$,{className:"flex items-center justify-center gap-2 p-6",onClick:()=>{o(!0),l(""),c(""),u(""),m(0),f(0)},children:[(0,s.jsx)(V.A,{className:"text-white w-5 h-5 !w-5 !h-5"}),"Add Product"]})}),(0,s.jsxs)(Z.Cf,{className:"data-[state=open]:!zoom-in-100 data-[state=open]:slide-in-from-left-20 data-[state=open]:duration-600 sm:max-w-xl",children:[(0,s.jsxs)(Z.c7,{children:[(0,s.jsx)(Z.L3,{children:"Product"}),(0,s.jsx)(Z.rr,{children:"Fill in the details below to add a new product."})]}),(0,s.jsxs)("div",{className:"flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(y.J,{htmlFor:"name-1",children:"Product Name"}),(0,s.jsx)(b.p,{id:"name-1",name:"name",value:a,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 mt-4",children:[(0,s.jsxs)("div",{className:"flex-[50%] flex flex-col gap-2",children:[(0,s.jsx)(y.J,{htmlFor:"barcode-1",children:"Barcode"}),(0,s.jsx)(b.p,{id:"barcode-1",name:"barcode",value:i||"",onChange:e=>c(e.target.value)}),"                            "]}),(0,s.jsxs)("div",{className:"flex-[50%] flex flex-col gap-2",children:[(0,s.jsx)(y.J,{htmlFor:"category-1",children:"Category"}),(0,s.jsx)(b.p,{id:"category-1",name:"category_id",value:d,onChange:e=>u(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 my-4",children:[(0,s.jsxs)("div",{className:"flex-[50%] flex flex-col gap-2",children:[(0,s.jsx)(y.J,{htmlFor:"price-1",children:"Price"}),(0,s.jsx)(b.p,{id:"price-1",name:"price",type:"number",value:x,onChange:e=>m(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"flex-[50%] flex flex-col gap-2",children:[(0,s.jsx)(y.J,{htmlFor:"quantity-1",children:"Quantity"}),(0,s.jsx)(b.p,{id:"quantity-1",name:"quantity",type:"number",value:h,onChange:e=>f(Number(e.target.value))})]})]})]}),(0,s.jsxs)(Z.Es,{children:[(0,s.jsx)(Z.HM,{asChild:!0,children:(0,s.jsx)(j.$,{variant:"outline",children:"Cancel"})}),(0,s.jsx)(j.$,{onClick:z,children:"Add Product"})]})]})]}),(0,s.jsxs)(Z.lG,{open:p,onOpenChange:e=>{g(e),e||_()},children:["                ",(0,s.jsx)(Z.Cf,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-2",children:[(0,s.jsx)("div",{className:"mb-4",children:C?(0,s.jsx)("span",{className:"text-red-500 text-4xl",children:"✗"}):(0,s.jsx)("span",{className:"text-green-500 text-4xl",children:"✓"})}),(0,s.jsx)(Z.L3,{className:"mb-2 text-center",children:C?"Error Adding Product":"Product Added!"}),(0,s.jsx)(Z.rr,{className:"mb-4 text-center",children:C||"Congratulations! Your product has been added successfully."}),C?(0,s.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,s.jsx)(j.$,{variant:"outline",onClick:()=>{g(!1),o(!0),_()},children:"Back"}),(0,s.jsx)(j.$,{onClick:()=>{g(!1)},children:"Close"})]}):(0,s.jsx)(j.$,{onClick:()=>{g(!1)},children:"Close"})]})})]})]})}function et(e){let{products:t}=e,a=t.filter(e=>e&&"number"==typeof e.quantity&&"number"==typeof e.price),r=a.length,l=a.filter(e=>e.quantity<5&&e.quantity>0).length,n=a.filter(e=>0===e.quantity).length,o=a.reduce((e,t)=>e+t.price*t.quantity,0),i=[{title:"Total Products",content:r},{title:"Low Stock Items",content:l},{title:"Out of Stock",content:n},{title:"Total Value",content:"₱ ".concat(o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))}];return(0,s.jsx)("div",{className:"grid grid-cols-4 gap-4 w-full h-full",children:i.map((e,t)=>(0,s.jsx)(u,{children:(0,s.jsxs)(p,{className:"flex flex-col justify-center items-start h-full",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold pb-4",children:e.title}),(0,s.jsx)("p",{className:"text-2xl font-bold ",children:e.content})]})},t))})}var ea=a(9449);function es(e){let{...t}=e;return(0,s.jsx)(ea.bL,{"data-slot":"dropdown-menu",...t})}function er(e){let{...t}=e;return(0,s.jsx)(ea.l9,{"data-slot":"dropdown-menu-trigger",...t})}function el(e){let{className:t,sideOffset:a=4,...r}=e;return(0,s.jsx)(ea.ZL,{children:(0,s.jsx)(ea.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function en(e){let{className:t,inset:a,...r}=e;return(0,s.jsx)(ea.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,d.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...r})}function eo(e){let{className:t,...a}=e;return(0,s.jsx)(ea.wv,{"data-slot":"dropdown-menu-separator",className:(0,d.cn)("bg-border -mx-1 my-1 h-px",t),...a})}var ei=a(93081),ec=a(66474),ed=a(5196),eu=a(47863);function ex(e){let{...t}=e;return(0,s.jsx)(ei.bL,{"data-slot":"select",...t})}function em(e){let{...t}=e;return(0,s.jsx)(ei.WT,{"data-slot":"select-value",...t})}function eh(e){let{className:t,size:a="default",children:r,...l}=e;return(0,s.jsxs)(ei.l9,{"data-slot":"select-trigger","data-size":a,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[r,(0,s.jsx)(ei.In,{asChild:!0,children:(0,s.jsx)(ec.A,{className:"size-4 opacity-50"})})]})}function ef(e){let{className:t,children:a,position:r="popper",...l}=e;return(0,s.jsx)(ei.ZL,{children:(0,s.jsxs)(ei.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...l,children:[(0,s.jsx)(eg,{}),(0,s.jsx)(ei.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(ej,{})]})})}function ep(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(ei.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(ei.VF,{children:(0,s.jsx)(ed.A,{className:"size-4"})})}),(0,s.jsx)(ei.p4,{children:a})]})}function eg(e){let{className:t,...a}=e;return(0,s.jsx)(ei.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(eu.A,{className:"size-4"})})}function ej(e){let{className:t,...a}=e;return(0,s.jsx)(ei.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(ec.A,{className:"size-4"})})}var ev=a(66932);let eb={async getAll(){let e=await fetch("".concat("http://13.211.162.106:5000/api","/categories"));if(!e.ok)throw Error("Failed to fetch categories: ".concat(e.status));return(await e.json()).data||[]}},ey=()=>{let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),o=async()=>{try{s(!0),n(null);let e=await eb.getAll();t(e)}catch(e){n(e instanceof Error?e.message:"An unexpected error occurred"),console.error("Error fetching categories:",e)}finally{s(!1)}};return(0,r.useEffect)(()=>{o()},[]),{categories:e,loading:a,error:l,refetch:o}};function eN(e){let{selectedCategory:t,setSelectedCategory:a,selectedProducts:r,setSelectedProducts:l}=e,{categories:n,loading:o,error:i}=ey();return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"relative flex items-center w-[700px]",children:[(0,s.jsx)(w.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)(b.p,{className:"pl-9 w-full",placeholder:"Search by product name or barcode...",onClick:e=>e.stopPropagation()})]}),(0,s.jsx)("div",{className:"class"}),(0,s.jsxs)(es,{children:[(0,s.jsx)(er,{asChild:!0,children:(0,s.jsxs)(j.$,{variant:"outline",children:[(0,s.jsx)(ev.A,{}),"Filter"]})}),(0,s.jsxs)(el,{className:"w-[300px] mr-18",children:[(0,s.jsx)(en,{children:"Filter"}),(0,s.jsx)(eo,{}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h1",{className:"text-sm font-medium",children:"Category"}),(0,s.jsxs)(ex,{value:t,onValueChange:a,children:[(0,s.jsx)(eh,{className:"w-full mt-2",children:(0,s.jsx)(em,{placeholder:"Category"})}),(0,s.jsxs)(ef,{children:[(0,s.jsx)(ep,{value:"all",children:"All Categories"}),o&&(0,s.jsx)("div",{className:"p-2 text-gray-400",children:"Loading categories..."}),i&&(0,s.jsx)("div",{className:"p-2 text-red-500",children:i}),!o&&!i&&n.map(e=>(0,s.jsx)(ep,{value:String(e.id),children:e.name},e.id))]})]})]}),(0,s.jsx)(eo,{}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h1",{className:"text-sm font-medium",children:"Status"}),(0,s.jsxs)(ex,{value:r,onValueChange:l,children:[(0,s.jsx)(eh,{className:"w-full mt-2",children:(0,s.jsx)(em,{placeholder:"Status"})}),(0,s.jsxs)(ef,{children:[(0,s.jsx)(ep,{value:"all",children:"All Stock"}),(0,s.jsx)(ep,{value:"in stock",children:"In Stock"}),(0,s.jsx)(ep,{value:"low stock",children:"Low Stock"}),(0,s.jsx)(ep,{value:"out of stock",children:"Out of Stock"})]})]})]}),(0,s.jsx)(eo,{}),(0,s.jsx)("div",{className:"flex justify-between w-full p-2 font-thin ",children:(0,s.jsx)(j.$,{className:"font-normal bg-white text-black border",variant:"ghost",onClick:()=>{a("all"),l("all")},children:"Reset All"})})]})]})]})}var ew=a(36268),eS=a(11032);function eC(e){let{columns:t,data:a,page:l,pageSize:n,onFilteredCountChange:o}=e,[i,c]=(0,r.useState)([]),d=(0,ew.N4)({data:a,columns:t,state:{sorting:i},onSortingChange:c,getCoreRowModel:(0,eS.HT)(),getSortedRowModel:(0,eS.h5)()});(0,r.useEffect)(()=>{o&&o(d.getRowModel().rows.length)},[d,o]);let u=d.getRowModel().rows.slice(l*n,(l+1)*n);return(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(M,{children:[(0,s.jsx)(R,{children:d.getHeaderGroups().map(e=>(0,s.jsx)(O,{children:e.headers.map(e=>(0,s.jsx)(B,{children:e.isPlaceholder?null:(0,ew.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(T,{children:u.length?u.map(e=>(0,s.jsx)(O,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(Y,{children:(0,ew.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(O,{children:(0,s.jsx)(Y,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})})}var ek=a(21492),e_=a(89917),ez=a(62525),eA=a(99708);let eD=(0,a(74466).F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function eE(e){let{className:t,variant:a,asChild:r=!1,...l}=e,n=r?eA.DX:"span";return(0,s.jsx)(n,{"data-slot":"badge",className:(0,d.cn)(eD({variant:a}),t),...l})}let eL=[{accessorKey:"productName",header:e=>{let{column:t}=e;return(0,s.jsxs)("button",{className:"flex items-center gap-2 font-medium focus:outline-none",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Product",(0,s.jsx)(ek.A,{className:"ml-1 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"flex items-center font-medium",children:t.getValue("productName")})}},{accessorKey:"barcode",header:"Barcode"},{accessorKey:"category",header:"Category"},{accessorKey:"currentStock",header:e=>{let{column:t}=e;return(0,s.jsxs)("button",{className:"flex items-center gap-2 font-medium focus:outline-none",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Current Stock",(0,s.jsx)(ek.A,{className:"ml-1 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"flex items-center font-medium",children:t.getValue("currentStock")})}},{accessorKey:"productPrice",header:"Price"},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,a=t.original.status,r="default";return"out of stock"===a?r="destructive":"low stock"===a?r="secondary":"in stock"===a&&(r="default"),(0,s.jsx)(eE,{variant:r,className:"in stock"===a?"bg-green-300 text-black":"low stock"===a?"bg-yellow-500 text-black":"out of stock"===a?"bg-red-500 text-white":"",children:a.replace(/^\w/,e=>e.toUpperCase())})}},{id:"actions",header:()=>(0,s.jsx)("div",{className:"text-center font-medium",children:"Actions"}),cell:()=>(0,s.jsxs)("div",{className:"flex gap-5 justify-center",children:[(0,s.jsx)(j.$,{variant:"outline",size:"icon",children:(0,s.jsx)(e_.A,{className:"w-4 h-4"})}),(0,s.jsx)(j.$,{variant:"outline",size:"icon",children:(0,s.jsx)(ez.A,{className:"w-4 h-4"})})]}),enableSorting:!1,enableHiding:!1}];var eF=a(42355),eP=a(13052),eq=a(5623);function e$(e){let{className:t,...a}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,d.cn)("mx-auto flex w-full justify-center",t),...a})}function eM(e){let{className:t,...a}=e;return(0,s.jsx)("ul",{"data-slot":"pagination-content",className:(0,d.cn)("flex flex-row items-center gap-1",t),...a})}function eR(e){let{...t}=e;return(0,s.jsx)("li",{"data-slot":"pagination-item",...t})}function eT(e){let{className:t,isActive:a,size:r="icon",...l}=e;return(0,s.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:(0,d.cn)((0,j.r)({variant:a?"outline":"ghost",size:r}),t),...l})}function eO(e){let{className:t,...a}=e;return(0,s.jsxs)(eT,{"aria-label":"Go to previous page",size:"default",className:(0,d.cn)("gap-1 px-2.5 sm:pl-2.5",t),...a,children:[(0,s.jsx)(eF.A,{}),(0,s.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function eB(e){let{className:t,...a}=e;return(0,s.jsxs)(eT,{"aria-label":"Go to next page",size:"default",className:(0,d.cn)("gap-1 px-2.5 sm:pr-2.5",t),...a,children:[(0,s.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,s.jsx)(eP.A,{})]})}function eY(e){let{className:t,...a}=e;return(0,s.jsxs)("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:(0,d.cn)("flex size-9 items-center justify-center",t),...a,children:[(0,s.jsx)(eq.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"More pages"})]})}function eK(e){let{page:t,pageCount:a,setPage:r,pageSize:l,onPageSizeChange:n}=e;return(0,s.jsxs)(e$,{className:"mt-2 flex items-center gap-4",children:[(0,s.jsxs)(eM,{children:[(0,s.jsx)(eR,{children:(0,s.jsx)(eO,{href:"#",onClick:e=>{e.preventDefault(),r(Math.max(t-1,0))},"aria-disabled":0===t})}),Array.from({length:a},(e,a)=>(0,s.jsx)(eR,{children:(0,s.jsx)(eT,{href:"#",isActive:a===t,onClick:e=>{e.preventDefault(),r(a)},children:a+1})},a)),a>5&&(0,s.jsx)(eR,{children:(0,s.jsx)(eY,{})}),(0,s.jsx)(eR,{children:(0,s.jsx)(eB,{href:"#",onClick:e=>{e.preventDefault(),r(Math.min(t+1,a-1))},"aria-disabled":t===a-1})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"page-size",className:"text-sm",children:"Rows per page:"}),(0,s.jsx)("input",{id:"page-size",type:"number",min:1,max:100,value:l,onChange:e=>n(Number(e.target.value)),className:"border rounded px-2 py-1 w-16 text-sm"})]})]})}var eI=a(56671);function eW(e){let t;return t=0===e.quantity?"out of stock":e.quantity<5?"low stock":"in stock",{id:e.id,productName:e.name,barcode:e.barcode,category:"Category ".concat(e.category_id),currentStock:e.quantity,productPrice:e.price,status:t}}function eH(e){let{products:t,selectedCategory:a,selectedStatus:n,onProductDeleted:o}=e,[i,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(0),[x,m]=(0,r.useState)(6),[h,f]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[y,N]=(0,r.useState)(!1),w="all"===a?t:t.filter(e=>String(e.category_id)===a);n&&"all"!==n&&(w=w.filter(e=>{let t;return(0===e.quantity?"out of stock":e.quantity<5?"low stock":"in stock")===n}));let S=(null!=w?w:[]).map(eW),C=Math.max(1,Math.ceil(S.length/x)),k=e=>{f(e),g(!0)},_=e=>{b(e),N(!0)};return(0,s.jsxs)("div",{className:"w-full mt-4 relative",children:[(0,s.jsx)(eC,{columns:eL.map(e=>"actions"===e.id?{...e,cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex gap-5 justify-center",children:[(0,s.jsx)(j.$,{variant:"outline",size:"icon",onClick:()=>k(t.original),children:"Edit"}),(0,s.jsx)(j.$,{variant:"outline",size:"icon",onClick:()=>_(t.original),children:"Delete"})]})}}:e),data:S,page:i,pageSize:x,onFilteredCountChange:u}),(0,s.jsx)("div",{className:"mt-7",children:(0,s.jsx)(eK,{page:i,pageCount:C,setPage:c,pageSize:x,onPageSizeChange:e=>{m(e),c(0)}})}),(0,s.jsx)(Z.lG,{open:p,onOpenChange:g,children:(0,s.jsxs)(Z.Cf,{children:[(0,s.jsxs)(Z.c7,{children:[(0,s.jsx)(Z.L3,{children:"Edit Product"}),(0,s.jsx)(Z.rr,{children:"Do you want to edit this product?"})]}),(0,s.jsxs)(Z.Es,{children:[(0,s.jsx)(j.$,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,s.jsx)(j.$,{onClick:()=>g(!1),children:"Edit (not implemented)"})]})]})}),(0,s.jsx)(Z.lG,{open:y,onOpenChange:N,children:(0,s.jsxs)(Z.Cf,{children:[(0,s.jsxs)(Z.c7,{children:[(0,s.jsx)(Z.L3,{children:"Delete Product"}),(0,s.jsx)(Z.rr,{children:"Do you want to delete this product?"})]}),(0,s.jsxs)(Z.Es,{children:[(0,s.jsx)(j.$,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,s.jsx)(j.$,{variant:"destructive",onClick:async()=>{if(v)try{await l.G.delete(v.id),(0,eI.oR)("Product deleted",{description:"".concat(v.productName," has been deleted.")}),N(!1),o&&o(v.id)}catch(e){(0,eI.oR)("Failed to delete product",{description:(null==e?void 0:e.message)||"An error occurred."})}},children:"Delete"})]})]})})]})}function eG(e){let{products:t,onProductDeleted:a}=e,[l,n]=(0,r.useState)("all"),[o,i]=(0,r.useState)("all"),[c,d]=(0,r.useState)("");return(0,s.jsxs)(u,{className:"h-full w-full",children:[(0,s.jsx)(x,{children:(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Product Catalog"})}),(0,s.jsxs)(p,{children:[(0,s.jsx)(eN,{selectedCategory:l,setSelectedCategory:n,selectedProducts:o,setSelectedProducts:i}),(0,s.jsx)(eH,{products:t,selectedCategory:l,selectedStatus:o,onProductDeleted:a})]})]})}function eU(){let{products:e,refetch:t}=P(),[a,l]=(0,r.useState)(e);return(0,r.useEffect)(()=>{l(e)},[e]),(0,s.jsxs)("div",{className:"flex flex-col gap-4 h-full p-8",children:[(0,s.jsx)("div",{className:"flex-[7%]",children:(0,s.jsx)(ee,{onProductAdded:e=>{e&&"number"==typeof e.quantity&&"number"==typeof e.price&&l(t=>[e,...t])}})}),(0,s.jsx)("div",{className:"flex-[18%]",children:(0,s.jsx)(et,{products:a})}),(0,s.jsx)("div",{className:"flex-[75%]",children:(0,s.jsx)(eG,{products:a,onProductDeleted:e=>{l(t=>t.filter(t=>t.id!==e))}})})]})}var eQ=a(55868),eJ=a(37108),eV=a(27809),eZ=a(23464);let eX=()=>{let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),o=async()=>{try{s(!0),n(null);let e=await eZ.A.get("http://13.211.162.106:5000/api/sales-items");t(e.data.data)}catch(e){n(e instanceof Error?e.message:"Unknown error")}finally{s(!1)}};return(0,r.useEffect)(()=>{o()},[]),{saleItems:e,loading:a,error:l,refetch:o}},e0=()=>{let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),o=async()=>{try{s(!0),n(null);let e=await eZ.A.get("http://13.211.162.106:5000/api/sales");t(e.data.data)}catch(e){n(e instanceof Error?e.message:"Unknown error")}finally{s(!1)}};return(0,r.useEffect)(()=>{o()},[]),{sales:e,loading:a,error:l,refetch:o}};function e1(){let{saleItems:e,loading:t}=eX(),{products:a,loading:r}=P(),{sales:l,loading:n}=e0(),o=e=>("string"==typeof e?new Date(e):e).toISOString().slice(0,10),i=o(new Date),c=l.filter(e=>o(e.created_at)===i),d=c.reduce((e,t)=>e+t.total_purchase,0),h=c.length;a.length;let f=e.filter(e=>o(e.created_at)===i).reduce((e,t)=>e+t.quantity,0),g=[{title:"Today's Sales",content:n?"...":"₱ ".concat(d.toLocaleString()),icon:(0,s.jsx)(eQ.A,{size:20})},{title:"Items Sold Today",content:t?"...":f.toLocaleString(),icon:(0,s.jsx)(eJ.A,{size:20})},{title:"Today's Transactions",content:n?"...":h.toLocaleString(),icon:(0,s.jsx)(eV.A,{size:20})}];return(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 w-full h-full",children:g.map((e,t)=>(0,s.jsxs)(u,{className:"gap-0 flex justify-center",children:[(0,s.jsxs)(x,{className:"mb-4 flex flex-row justify-between items-center",children:[(0,s.jsx)(m,{className:"text-md font-semibold",children:e.title}),(0,s.jsx)("div",{className:"opacity-60",children:e.icon})]}),(0,s.jsx)(p,{children:(0,s.jsx)("div",{className:"text-3xl font-bold mb-6",children:e.content})})]},t))})}var e2=a(69074),e5=a(3401),e4=a(94754),e3=a(96025),e6=a(58227),e8=a(15968),e9=a(15933),e7=a(50713),te=a(28406);function tt(){let e=(0,e9._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return tt=function(){return e},e}function ta(){let e=(0,e9._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return ta=function(){return e},e}function ts(e){let{className:t,classNames:a,showOutsideDays:r=!0,captionLayout:l="label",buttonVariant:n="ghost",formatters:o,components:i,...c}=e,u=(0,e7.a)();return(0,s.jsx)(te.h,{showOutsideDays:r,className:(0,d.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(tt()),String.raw(ta()),t),captionLayout:l,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...o},classNames:{root:(0,d.cn)("w-fit",u.root),months:(0,d.cn)("flex gap-4 flex-col md:flex-row relative",u.months),month:(0,d.cn)("flex flex-col w-full gap-4",u.month),nav:(0,d.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",u.nav),button_previous:(0,d.cn)((0,j.r)({variant:n}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",u.button_previous),button_next:(0,d.cn)((0,j.r)({variant:n}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",u.button_next),month_caption:(0,d.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",u.month_caption),dropdowns:(0,d.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",u.dropdowns),dropdown_root:(0,d.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",u.dropdown_root),dropdown:(0,d.cn)("absolute bg-popover inset-0 opacity-0",u.dropdown),caption_label:(0,d.cn)("select-none font-medium","label"===l?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",u.caption_label),table:"w-full border-collapse",weekdays:(0,d.cn)("flex",u.weekdays),weekday:(0,d.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",u.weekday),week:(0,d.cn)("flex w-full mt-2",u.week),week_number_header:(0,d.cn)("select-none w-(--cell-size)",u.week_number_header),week_number:(0,d.cn)("text-[0.8rem] select-none text-muted-foreground",u.week_number),day:(0,d.cn)("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",u.day),range_start:(0,d.cn)("rounded-l-md bg-accent",u.range_start),range_middle:(0,d.cn)("rounded-none",u.range_middle),range_end:(0,d.cn)("rounded-r-md bg-accent",u.range_end),today:(0,d.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",u.today),outside:(0,d.cn)("text-muted-foreground aria-selected:text-muted-foreground",u.outside),disabled:(0,d.cn)("text-muted-foreground opacity-50",u.disabled),hidden:(0,d.cn)("invisible",u.hidden),...a},components:{Root:e=>{let{className:t,rootRef:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"calendar",ref:a,className:(0,d.cn)(t),...r})},Chevron:e=>{let{className:t,orientation:a,...r}=e;return"left"===a?(0,s.jsx)(eF.A,{className:(0,d.cn)("size-4",t),...r}):"right"===a?(0,s.jsx)(eP.A,{className:(0,d.cn)("size-4",t),...r}):(0,s.jsx)(ec.A,{className:(0,d.cn)("size-4",t),...r})},DayButton:tr,WeekNumber:e=>{let{children:t,...a}=e;return(0,s.jsx)("td",{...a,children:(0,s.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:t})})},...i},...c})}function tr(e){let{className:t,day:a,modifiers:l,...n}=e,o=(0,e7.a)(),i=r.useRef(null);return r.useEffect(()=>{var e;l.focused&&(null==(e=i.current)||e.focus())},[l.focused]),(0,s.jsx)(j.$,{ref:i,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":l.selected&&!l.range_start&&!l.range_end&&!l.range_middle,"data-range-start":l.range_start,"data-range-end":l.range_end,"data-range-middle":l.range_middle,className:(0,d.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",o.day,t),...n})}var tl=a(83540),tn=a(94517),to=a(24026);let ti={light:"",dark:".dark"},tc=r.createContext(null);function td(e){let{id:t,className:a,children:l,config:n,...o}=e,i=r.useId(),c="chart-".concat(t||i.replace(/:/g,""));return(0,s.jsx)(tc.Provider,{value:{config:n},children:(0,s.jsxs)("div",{"data-slot":"chart","data-chart":c,className:(0,d.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",a),...o,children:[(0,s.jsx)(tu,{id:c,config:n}),(0,s.jsx)(tl.u,{children:l})]})})}let tu=e=>{let{id:t,config:a}=e,r=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return r.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(ti).map(e=>{let[a,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(r.map(e=>{var t;let[s,r]=e,l=(null==(t=r.theme)?void 0:t[a])||r.color;return l?"  --color-".concat(s,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},tx=tn.m;function tm(e){let{active:t,payload:a,className:l,indicator:n="dot",hideLabel:o=!1,hideIndicator:i=!1,label:c,labelFormatter:u,labelClassName:x,formatter:m,color:h,nameKey:f,labelKey:p}=e,{config:g}=function(){let e=r.useContext(tc);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),j=r.useMemo(()=>{var e;if(o||!(null==a?void 0:a.length))return null;let[t]=a,r="".concat(p||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),l=th(g,t,r),n=p||"string"!=typeof c?null==l?void 0:l.label:(null==(e=g[c])?void 0:e.label)||c;return u?(0,s.jsx)("div",{className:(0,d.cn)("font-medium",x),children:u(n,a)}):n?(0,s.jsx)("div",{className:(0,d.cn)("font-medium",x),children:n}):null},[c,u,a,o,x,g,p]);if(!t||!(null==a?void 0:a.length))return null;let v=1===a.length&&"dot"!==n;return(0,s.jsxs)("div",{className:(0,d.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",l),children:[v?null:j,(0,s.jsx)("div",{className:"grid gap-1.5",children:a.map((e,t)=>{let a="".concat(f||e.name||e.dataKey||"value"),r=th(g,e,a),l=h||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,d.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===n&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==r?void 0:r.icon)?(0,s.jsx)(r.icon,{}):!i&&(0,s.jsx)("div",{className:(0,d.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===n,"w-1":"line"===n,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===n,"my-0.5":v&&"dashed"===n}),style:{"--color-bg":l,"--color-border":l}}),(0,s.jsxs)("div",{className:(0,d.cn)("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[v?j:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}function th(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,r=a;return a in t&&"string"==typeof t[a]?r=t[a]:s&&a in s&&"string"==typeof s[a]&&(r=s[a]),r in e?e[r]:e[a]}to.s;var tf=a(20547);function tp(e){let{...t}=e;return(0,s.jsx)(tf.bL,{"data-slot":"popover",...t})}function tg(e){let{...t}=e;return(0,s.jsx)(tf.l9,{"data-slot":"popover-trigger",...t})}function tj(e){let{className:t,align:a="center",sideOffset:r=4,...l}=e;return(0,s.jsx)(tf.ZL,{children:(0,s.jsx)(tf.UC,{"data-slot":"popover-content",align:a,sideOffset:r,className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}let tv={quantity:{label:"Quantity Sold",color:"var(--color-primary)"}};function tb(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),[a,l]=(0,r.useState)({from:t,to:e}),[n,o]=(0,r.useState)("desc"),{saleItems:i,loading:c,error:d}=eX(),{products:v}=P(),b=(0,r.useMemo)(()=>{let e={};return v.forEach(t=>{e[t.id]=t.name}),e},[v]),y=(e,t)=>e.setHours(0,0,0,0)>=t.setHours(0,0,0,0),N=(e,t)=>e.setHours(0,0,0,0)<=t.setHours(0,0,0,0),w=(0,r.useMemo)(()=>{let e={};i.forEach(t=>{let s=new Date(t.created_at);(!(null==a?void 0:a.from)||y(s,a.from))&&(!(null==a?void 0:a.to)||N(s,a.to))&&(e[t.product_id]=(e[t.product_id]||0)+t.quantity)});let t=Object.entries(e).map(e=>{let[t,a]=e;return{product:b[Number(t)]||"Product ".concat(t),quantity:a}});return"asc"===n?t=t.sort((e,t)=>e.quantity-t.quantity):"desc"===n&&(t=t.sort((e,t)=>t.quantity-e.quantity)),t},[i,a,b,n]),S=(0,r.useMemo)(()=>w.reduce((e,t)=>e+t.quantity,0),[w]);return(0,s.jsxs)(u,{className:"@container/card w-full",children:[(0,s.jsxs)(x,{className:"flex flex-col border-b @md/card:grid",children:[(0,s.jsx)(m,{children:"Product Analytics"}),(0,s.jsx)(h,{children:"Showing most sold products for this month."}),(0,s.jsx)(f,{className:"mt-2 @md/card:mt-0",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center mt-2",children:[(0,s.jsxs)(j.$,{variant:"desc"===n?"default":"outline",size:"sm",onClick:()=>o("desc"),"aria-label":"Sort Descending",children:[(0,s.jsx)(ec.A,{className:"mr-1",size:16})," Desc"]}),(0,s.jsxs)(j.$,{variant:"asc"===n?"default":"outline",size:"sm",onClick:()=>o("asc"),"aria-label":"Sort Ascending",children:[(0,s.jsx)(eu.A,{className:"mr-1",size:16})," Asc"]}),(0,s.jsxs)(j.$,{variant:"normal"===n?"default":"outline",size:"sm",onClick:()=>o("normal"),"aria-label":"Follow Order",children:[(0,s.jsx)(e8.A,{className:"mr-1",size:16})," Follow Order"]}),(0,s.jsxs)(tp,{children:[(0,s.jsx)(tg,{asChild:!0,children:(0,s.jsxs)(j.$,{variant:"outline",children:[(0,s.jsx)(e2.A,{}),(null==a?void 0:a.from)&&(null==a?void 0:a.to)?"".concat(a.from.toLocaleDateString()," - ").concat(a.to.toLocaleDateString()):"".concat(t.toLocaleDateString()," - ").concat(e.toLocaleDateString())]})}),(0,s.jsx)(tj,{className:"w-auto overflow-hidden p-0",align:"end",children:(0,s.jsx)(ts,{className:"w-full",mode:"range",defaultMonth:null==a?void 0:a.from,selected:a,onSelect:l,fixedWeeks:!0,showOutsideDays:!0,disabled:{after:e}})})]})]})})]}),(0,s.jsx)(p,{className:"px-4",children:(0,s.jsx)(td,{config:tv,className:"aspect-auto h-89 w-full",children:(0,s.jsxs)(e5.E,{accessibilityLayer:!0,data:w,margin:{left:12,right:12},children:[(0,s.jsx)(e4.d,{vertical:!1}),(0,s.jsx)(e3.W,{dataKey:"product",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:20}),(0,s.jsx)(tx,{content:(0,s.jsx)(tm,{className:"w-[150px]",nameKey:"quantity",labelFormatter:e=>e})}),(0,s.jsx)(e6.y,{dataKey:"quantity",fill:"var(--color-quantity)",radius:4})]})})}),(0,s.jsx)(g,{className:"border-t",children:(0,s.jsxs)("div",{className:"text-sm",children:["Total sold: ",(0,s.jsx)("span",{className:"font-semibold",children:S.toLocaleString()})]})})]})}var ty=a(93504),tN=a(21374);let tw={customer:{label:"Customer",color:"var(--color-primary)"}};function tS(){let{sales:e,loading:t,error:a}=e0(),l=new Date,n=new Date(l.getFullYear(),l.getMonth(),1),[o,i]=r.useState({from:new Date(l.getFullYear(),l.getMonth(),1),to:l}),[c,d]=r.useState("desc"),v=(e,t)=>e.setHours(0,0,0,0)>=t.setHours(0,0,0,0),b=(e,t)=>e.setHours(0,0,0,0)<=t.setHours(0,0,0,0),y=r.useMemo(()=>{let t={};return e.forEach(e=>{let a=e.created_at.slice(0,10);t[a]||(t[a]=new Set),t[a].add(e.customer_id)}),Object.entries(t).map(e=>{let[t,a]=e;return{date:t,customer:a.size}})},[e]),N=r.useMemo(()=>(null==o?void 0:o.from)||(null==o?void 0:o.to)?y.filter(e=>{let t=new Date(e.date);return(!o.from||v(t,o.from))&&(!o.to||b(t,o.to))}):y,[o,y]),w=r.useMemo(()=>{let e=[...N];return"asc"===c?e=e.sort((e,t)=>e.customer-t.customer):"desc"===c&&(e=e.sort((e,t)=>t.customer-e.customer)),e},[N,c]),S=r.useMemo(()=>w.reduce((e,t)=>e+t.customer,0),[w]);return(0,s.jsxs)(u,{className:"@container/card w-full ",children:[(0,s.jsxs)(x,{className:"flex flex-col border-b @md/card:grid",children:[(0,s.jsx)(m,{children:"Sales Chart"}),(0,s.jsx)(h,{children:"Filter total customers by date range"}),(0,s.jsx)(f,{className:"mt-2 @md/card:mt-0",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center mt-2",children:[(0,s.jsxs)(j.$,{variant:"desc"===c?"default":"outline",size:"sm",onClick:()=>d("desc"),"aria-label":"Sort Descending",children:[(0,s.jsx)(ec.A,{className:"mr-1",size:16})," Desc"]}),(0,s.jsxs)(j.$,{variant:"asc"===c?"default":"outline",size:"sm",onClick:()=>d("asc"),"aria-label":"Sort Ascending",children:[(0,s.jsx)(eu.A,{className:"mr-1",size:16})," Asc"]}),(0,s.jsxs)(j.$,{variant:"normal"===c?"default":"outline",size:"sm",onClick:()=>d("normal"),"aria-label":"Follow Order",children:[(0,s.jsx)(e8.A,{className:"mr-1",size:16})," Follow Order"]}),(0,s.jsxs)(tp,{children:[(0,s.jsx)(tg,{asChild:!0,children:(0,s.jsxs)(j.$,{variant:"outline",children:[(0,s.jsx)(e2.A,{}),(null==o?void 0:o.from)&&(null==o?void 0:o.to)?"".concat(o.from.toLocaleDateString()," - ").concat(o.to.toLocaleDateString()):"".concat(n.toLocaleDateString()," - ").concat(l.toLocaleDateString())]})}),(0,s.jsx)(tj,{className:"w-auto overflow-hidden p-0",align:"end",children:(0,s.jsx)(ts,{className:"w-full",mode:"range",defaultMonth:null==o?void 0:o.from,selected:o,onSelect:i,fixedWeeks:!0,showOutsideDays:!0,disabled:{after:l}})})]})]})})]}),(0,s.jsx)(p,{className:"px-4 ",children:(0,s.jsx)(td,{config:tw,className:"aspect-auto h-89 w-full",children:(0,s.jsxs)(ty.b,{accessibilityLayer:!0,data:w,margin:{left:12,right:12},children:[(0,s.jsx)(e4.d,{vertical:!1}),(0,s.jsx)(e3.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:20,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{day:"numeric"})}),(0,s.jsx)(tx,{content:(0,s.jsx)(tm,{className:"w-[150px]",nameKey:"customer",labelFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),(0,s.jsx)(tN.N,{dataKey:"customer",type:"monotone",stroke:"var(--color-customer)",strokeWidth:2,dot:!1})]})})}),(0,s.jsx)(g,{className:"border-t",children:(0,s.jsxs)("div",{className:"text-sm",children:["You had ",(0,s.jsx)("span",{className:"font-semibold",children:S.toLocaleString()})," customers for the selected period."]})})]})}function tC(){return(0,s.jsxs)("div",{className:"flex flex-col p-6 h-full gap-3",children:[(0,s.jsxs)("div",{className:"flex-[7%]",children:[(0,s.jsx)("h1",{className:"font-extrabold text-4xl",children:"Dashboard"}),(0,s.jsx)("p",{children:"Welcome Back! Here's your business overview!"})]}),(0,s.jsx)("div",{className:"flex-[20%]",children:(0,s.jsx)(e1,{})}),(0,s.jsxs)("div",{className:"flex-[78%] flex flex-row gap-3",children:[(0,s.jsx)("div",{className:"flex-[50%]",children:(0,s.jsx)(tb,{})}),(0,s.jsx)("div",{className:"flex-[50%]",children:(0,s.jsx)(tS,{})})]})]})}function tk(e){let{params:t}=e,{site:a}=(0,r.use)(t);switch(a){case"main":return(0,s.jsx)(tC,{});case"pos":return(0,s.jsx)(J,{});case"products":return(0,s.jsx)(eU,{});default:return(0,s.jsx)("div",{children:a})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[247,788,746,792,554,50,881,441,684,358],()=>t(68529)),_N_E=e.O()}]);